<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>心如止水</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-09-18T14:12:09.560Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>gerogegao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hive的基本操作</title>
    <link href="http://yoursite.com/2019/09/17/hive%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <id>http://yoursite.com/2019/09/17/hive的基本操作/</id>
    <published>2019-09-17T13:57:11.000Z</published>
    <updated>2019-09-18T14:12:09.560Z</updated>
    
    <content type="html"><![CDATA[<h1 id="表的增删改查操作"><a href="#表的增删改查操作" class="headerlink" title="表的增删改查操作"></a>表的增删改查操作</h1><h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>使用if not exists 如果存在则跳过，comment为注释。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> mydb.employees(</span><br><span class="line"><span class="keyword">name</span> <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'Employee name'</span>,</span><br><span class="line">salary <span class="built_in">float</span> <span class="keyword">comment</span> <span class="string">'Employee salary'</span>,</span><br><span class="line">subordinates <span class="built_in">array</span>&lt;<span class="keyword">string</span>&gt; <span class="keyword">comment</span> <span class="string">'Names of subordinates'</span>,</span><br><span class="line">deduction <span class="keyword">map</span>&lt;<span class="keyword">string</span>, <span class="built_in">float</span>&gt;,</span><br><span class="line">address <span class="keyword">struct</span>&lt;street:<span class="keyword">string</span>, city:<span class="keyword">string</span>, state:<span class="keyword">string</span>, zip:<span class="built_in">int</span>&gt; <span class="keyword">comment</span> <span class="string">'Home address'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">comment</span> <span class="string">'descriptions of table'</span></span><br><span class="line">location <span class="string">'/user/hive/warehouse/mydb.db/employees'</span>;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="描述表"><a href="#描述表" class="headerlink" title="描述表"></a>描述表</h2><p>显示表的字段和结构，使用desc/describe </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--显示表的字段和数据类型</span></span><br><span class="line">desc table_name;</span><br><span class="line"><span class="comment">--显示对应字段的数据类型</span></span><br><span class="line">desc table_name.columns</span><br></pre></td></tr></table></figure><h2 id="管理表和外部表"><a href="#管理表和外部表" class="headerlink" title="管理表和外部表"></a>管理表和外部表</h2><p><strong>管理表</strong>是hive创建的表，由hive控制其生命周期，hive默认情况下会将数据存在在配置文件指定的目录当中，由hive.metastore.warehouse.dir指定。当使用hive删除表的时候，对应的数据也会被删除，即hdfs文件系统中的数据也会被删除。管理表的缺点在于无法共享数据，比如利用pig等工具创建的数据，hive对其没有权限。当使用hive查询这些数据的时候就可以使用一个外部表指向这份数据，而不需要对其的权限。外部表需要使用external修饰。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> stocks(</span><br><span class="line"><span class="keyword">exchange</span><span class="keyword">string</span>,</span><br><span class="line">symbol<span class="keyword">string</span>,</span><br><span class="line">ymd<span class="keyword">string</span>,</span><br><span class="line">price__open<span class="keyword">string</span>,</span><br><span class="line">price__high<span class="keyword">string</span>,</span><br><span class="line">price__low<span class="keyword">string</span>,</span><br><span class="line">price__close<span class="built_in">float</span>,</span><br><span class="line">volume<span class="built_in">int</span>,</span><br><span class="line">price_adj_close<span class="built_in">float</span>)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="string">'分隔符为,'</span></span><br><span class="line">location <span class="string">'data/stocks'</span>;</span><br></pre></td></tr></table></figure><p>加上external字段值后，删除表并不会删除这份数据，不过描述标的元数据信息会被删除。元数据可以理解为对该表的描述信息，而不是表内数据。</p><p>需要注意的是如果语句省略了external关键字同事源表是外部表，那么新表也是外部表，如果源表是管理表，新表也是管理表。在加上external之后，无论源表是管理表还是外部表，新表都是外部表。</p><h2 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h2><p>在建表过程中，会根据分区字段创建对应目录，优点在于分层存储，可以加快查询速度，而缺点在于一些数据存在于文件目录下，但是hive只能从表中读取数据，因此会造成资源浪费。分区表创建：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employees(</span><br><span class="line"><span class="keyword">name</span><span class="keyword">string</span>,</span><br><span class="line">salary<span class="built_in">float</span>,</span><br><span class="line">subordinates<span class="built_in">array</span>&lt;<span class="keyword">string</span>&gt;,</span><br><span class="line">deduction<span class="keyword">map</span>&lt;<span class="keyword">string</span>,<span class="built_in">float</span>&gt;,</span><br><span class="line">address<span class="keyword">struct</span>&lt;street:<span class="keyword">string</span>, city:<span class="keyword">string</span>, city:<span class="keyword">string</span>, state:<span class="keyword">string</span>&gt;</span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span> (country <span class="keyword">string</span>, state <span class="keyword">string</span>);</span><br></pre></td></tr></table></figure><p>在建表的时候hive在hdfs上的目录为…/employees/country/state</p><p>查看表中存在所有分区</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">partitions</span> employees;</span><br></pre></td></tr></table></figure><p>查询指定分区</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">partitions</span> employees <span class="keyword">partition</span>(country=<span class="string">'CHINA'</span>)</span><br></pre></td></tr></table></figure><h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> table_name;</span><br></pre></td></tr></table></figure><p>对于管理表，表的元数据和表内数据都会被删除。</p><h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><h3 id="表的重命名"><a href="#表的重命名" class="headerlink" title="　表的重命名"></a>　表的重命名</h3><p>将表从ａ重命名为ｂ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> a <span class="keyword">rename</span> <span class="keyword">to</span> b;</span><br></pre></td></tr></table></figure><h3 id><a href="#" class="headerlink" title="　"></a>　</h3><h3 id="增加表分区"><a href="#增加表分区" class="headerlink" title="增加表分区"></a>增加表分区</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">add</span> partiion</span><br><span class="line"><span class="comment">--在一个查询语句中增加多个分区</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> </span><br><span class="line"><span class="keyword">partition</span>(...) location <span class="string">'/user/hive/warehouse/a'</span></span><br><span class="line"><span class="keyword">partition</span>(...) location <span class="string">'/user/hive/warehouse/b'</span></span><br><span class="line"><span class="keyword">partition</span>(...) location <span class="string">'/user/hive/warehouse/c'</span></span><br></pre></td></tr></table></figure><h3 id="修改列的信息"><a href="#修改列的信息" class="headerlink" title="修改列的信息"></a>修改列的信息</h3><p>将列名从a改到b，并且将其移到serverity字段后面。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">change</span> </span><br><span class="line"><span class="keyword">column</span> a b type_name <span class="string">'修改列的数据类型'</span></span><br><span class="line"><span class="keyword">comment</span> <span class="string">'xxx'</span></span><br><span class="line"><span class="keyword">after</span> serverity</span><br></pre></td></tr></table></figure><h3 id="增加新的列"><a href="#增加新的列" class="headerlink" title="增加新的列"></a>增加新的列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">add</span> <span class="keyword">column</span>(</span><br><span class="line">    app_name <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'Application name'</span>,</span><br><span class="line">    session_id <span class="keyword">long</span> <span class="keyword">comment</span> <span class="string">'the current session id'</span>;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="删除或替换列"><a href="#删除或替换列" class="headerlink" title="删除或替换列"></a>删除或替换列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  table_name <span class="keyword">replace</span> <span class="keyword">columns</span>（</span><br><span class="line">hour_mins_secs <span class="built_in">INT</span> <span class="keyword">comment</span> <span class="string">'xxx'</span></span><br><span class="line">severity <span class="keyword">string</span> <span class="keyword">comment</span> <span class="string">'xxx'</span>;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>将之前的列都删除，只留下replace的列</p><h3 id="修改表的属性"><a href="#修改表的属性" class="headerlink" title="修改表的属性"></a>修改表的属性</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">set</span> tblproperties(<span class="string">'notes'</span>=<span class="string">'xxx'</span>);</span><br></pre></td></tr></table></figure><h3 id="修改表的存储属性"><a href="#修改表的存储属性" class="headerlink" title="修改表的存储属性"></a>修改表的存储属性</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name <span class="keyword">partition</span>(a=xxx,b=xxx,c=xxx) <span class="keyword">set</span> fileformat sequencefile;</span><br></pre></td></tr></table></figure><p>指定对应的分区中的表，并且重新设置其格式。</p><h1 id="加载和导出数据"><a href="#加载和导出数据" class="headerlink" title="加载和导出数据"></a>加载和导出数据</h1><h2 id="从本地加载数据"><a href="#从本地加载数据" class="headerlink" title="从本地加载数据"></a>从本地加载数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'/home/hadopp/data.txt'</span></span><br><span class="line">overwrite <span class="keyword">into</span> <span class="keyword">table</span> employees</span><br><span class="line"><span class="keyword">partition</span>(country=<span class="string">'US'</span>,state=<span class="string">'CA'</span>);</span><br></pre></td></tr></table></figure><p>需要注意的是创建分区表的时候使用的是partition by。如果目录不存在，hive会先创建分区目录。</p><h2 id="通过查询语句加载数据"><a href="#通过查询语句加载数据" class="headerlink" title="通过查询语句加载数据"></a>通过查询语句加载数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> employees</span><br><span class="line"><span class="keyword">partition</span>(country=<span class="string">'US'</span>,state=<span class="string">'CA'</span>)</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> table_name <span class="keyword">where</span> xxx=xxx;</span><br></pre></td></tr></table></figure><h2 id="通过查询语句建表"><a href="#通过查询语句建表" class="headerlink" title="通过查询语句建表"></a>通过查询语句建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> table_name <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> table_name_b;</span><br></pre></td></tr></table></figure><h2 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--方法一，谁用hadoop提供的工具</span></span><br><span class="line">hadoop fs -cp source_path target_path</span><br><span class="line"><span class="comment">--方法二</span></span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">local</span> <span class="keyword">directory</span> <span class="string">'/home/hadoop/employees'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure><h1 id="hive的连接操作"><a href="#hive的连接操作" class="headerlink" title="hive的连接操作"></a>hive的连接操作</h1><p>table stu</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1chenli21</span><br><span class="line">2xuzeng22</span><br><span class="line">3xiaodan23</span><br><span class="line">4hua24</span><br></pre></td></tr></table></figure><p>table sub</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1chinese</span><br><span class="line">2english</span><br><span class="line">3science</span><br><span class="line">5nature</span><br></pre></td></tr></table></figure><h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><p>inner join，关键字 join on。仅列出两个表中符合连接条件的数据。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.*,b.* <span class="keyword">from</span> stu a <span class="keyword">join</span> sub b <span class="keyword">on</span> a.id=b.id</span><br><span class="line"><span class="comment">--结果</span></span><br><span class="line"><span class="number">1</span>chenli<span class="number">21</span><span class="number">1</span>chinese</span><br><span class="line"><span class="number">2</span>xuzeng<span class="number">22</span><span class="number">2</span>english</span><br><span class="line"><span class="number">3</span>xiaodan<span class="number">23</span><span class="number">3</span>science</span><br></pre></td></tr></table></figure><p>join后面连接表，而on指定连接条件。</p><h2 id="左连接和右连接"><a href="#左连接和右连接" class="headerlink" title="左连接和右连接"></a>左连接和右连接</h2><p>左连接，显示左边表的所有数据，如果右边表有与之对应的数据则显示，否则显示为NULL。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.* <span class="keyword">from</span> stu a <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> sub b <span class="keyword">on</span> a.id=b.id;</span><br><span class="line"><span class="comment">--结果</span></span><br><span class="line">1chenli211chinese</span><br><span class="line">2xuzeng222english</span><br><span class="line">3xiaodan233science</span><br><span class="line">4hua24NULLNULL</span><br></pre></td></tr></table></figure><p>右连接与左连接相反，使用的关键字为 <strong>right outer  join xxx on xxx</strong>。</p><p>标准查询关键字执行顺序为 from-&gt;where-&gt;group by-&gt;having-&gt;order by。</p><h2 id="全连接"><a href="#全连接" class="headerlink" title="全连接"></a>全连接</h2><p>左表和右表都显示，如果没有对应数据，则都显示为NULL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.* <span class="keyword">from</span> stu a <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> sub b <span class="keyword">on</span> a.id=b.id;</span><br><span class="line"><span class="comment">--结果</span></span><br><span class="line">1chenli211chinese</span><br><span class="line">2xuzeng222english</span><br><span class="line">3xiaodan233science</span><br><span class="line">4hua24NULLNULL</span><br><span class="line">NULLNULLNULL5nature</span><br></pre></td></tr></table></figure><h2 id="左半开连接"><a href="#左半开连接" class="headerlink" title="左半开连接"></a>左半开连接</h2><p>左半开连接。left semi join，语法与左连接不一样，只能选择出左边表的数据，此数据符合on后面的条件。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.* <span class="keyword">from</span> stu a <span class="keyword">left</span> <span class="keyword">semi</span> <span class="keyword">join</span> sub b <span class="keyword">on</span> a.id=b.id;</span><br><span class="line"><span class="comment">--结果</span></span><br><span class="line">1chenli21</span><br><span class="line">2xuzeng22</span><br><span class="line">3xiaodan23</span><br><span class="line"><span class="comment">--下列语句会报错</span></span><br><span class="line"><span class="keyword">select</span> a.*,b.* <span class="keyword">from</span> stu a <span class="keyword">left</span> <span class="keyword">semi</span> <span class="keyword">join</span> sub b <span class="keyword">on</span> a.id=b.id;</span><br></pre></td></tr></table></figure><h2 id="笛卡尔连接"><a href="#笛卡尔连接" class="headerlink" title="笛卡尔连接"></a>笛卡尔连接</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.*,b.* <span class="keyword">from</span> cl_student a <span class="keyword">join</span> cl_stu_sub b;</span><br><span class="line"><span class="comment">--结果</span></span><br><span class="line">1chenli211chinese</span><br><span class="line">1chenli212english</span><br><span class="line">1chenli213science</span><br><span class="line">1chenli215nature</span><br><span class="line">2xuzeng221chinese</span><br><span class="line">2xuzeng222english</span><br><span class="line">2xuzeng223science</span><br><span class="line">2xuzeng225nature</span><br><span class="line">3xiaodan231chinese</span><br><span class="line">3xiaodan232english</span><br><span class="line">3xiaodan233science</span><br><span class="line">3xiaodan235nature</span><br><span class="line">4hua241chinese</span><br><span class="line">4hua242english</span><br><span class="line">4hua243science</span><br><span class="line">4hua245nature</span><br></pre></td></tr></table></figure><p>花了几天的时间整理了hive的用法，终于不用在对着SQL摸瞎了，加油吧进击的SQL boy！ 日常福利(●´∀｀●)</p><p><img src="https://raw.githubusercontent.com/geroge-gao/Images/master/alisi.jpg" alt="爱丽丝"></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;表的增删改查操作&quot;&gt;&lt;a href=&quot;#表的增删改查操作&quot; class=&quot;headerlink&quot; title=&quot;表的增删改查操作&quot;&gt;&lt;/a&gt;表的增删改查操作&lt;/h1&gt;&lt;h2 id=&quot;创建表&quot;&gt;&lt;a href=&quot;#创建表&quot; class=&quot;headerlink&quot; title=&quot;创建表&quot;&gt;&lt;/a&gt;创建表&lt;/h2&gt;&lt;p&gt;使用if not exists 如果存在则跳过，comment为注释。&lt;/p&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;exists&lt;/span&gt; mydb.employees(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Employee name&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	salary &lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Employee salary&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	subordinates &lt;span class=&quot;built_in&quot;&gt;array&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Names of subordinates&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	deduction &lt;span class=&quot;keyword&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;&amp;gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	address &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt;&amp;lt;street:&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, city:&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, state:&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, zip:&lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Home address&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;descriptions of table&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;location &lt;span class=&quot;string&quot;&gt;&#39;/user/hive/warehouse/mydb.db/employees&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="大数据" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="hive编程" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/hive%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Hive" scheme="http://yoursite.com/tags/Hive/"/>
    
      <category term="基本操作" scheme="http://yoursite.com/tags/%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    
  </entry>
  
  <entry>
    <title>hive数据类型</title>
    <link href="http://yoursite.com/2019/09/08/hive%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <id>http://yoursite.com/2019/09/08/hive数据类型/</id>
    <published>2019-09-08T08:40:03.000Z</published>
    <updated>2019-09-08T16:04:42.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文本文件数据编码"><a href="#文本文件数据编码" class="headerlink" title="文本文件数据编码"></a>文本文件数据编码</h2><ul><li>TSV：tab separated values；即“制表符分隔值”，用制表符分隔数据</li><li>CSV： comma separated values；即“逗号分隔值”，用逗号分隔数据</li></ul><p>两种文件存在的缺点在于文件中可能存在不需要作为分隔符的逗号或者制表符存在，所有hive有专门的分隔符。</p><p>hive记录中默认的分隔符</p><a id="more"></a><div class="table-container"><table><thead><tr><th style="text-align:center">分隔符</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">\n</td><td style="text-align:center">对于文本文件来说每一行都是记录，可以使用换行符作为分隔符</td></tr><tr><td style="text-align:center">^A(ctrl+A)</td><td style="text-align:center">用于分隔字段(列)，在CREATE TABLE 语句中可以使用八进制编码\001表示，键盘上打不出来。</td></tr><tr><td style="text-align:center">^B</td><td style="text-align:center">用于分隔array或者struct中的元素，或于用map钟键值对的分隔，在CREATE TABLE中使用\002表示</td></tr><tr><td style="text-align:center">^C</td><td style="text-align:center">用于MAP钟键与值的分隔，用\003表示</td></tr></tbody></table></div><h2 id="读时模式"><a href="#读时模式" class="headerlink" title="读时模式"></a>读时模式</h2><p>传统数据库是<strong>写时模式</strong>，即在写入文件的时候会，会对数据的格式进行校验，如果不符合，将无法写入数据库。</p><p>hive是<strong>读时模式</strong>，在往数据库里写入不会对数据进行校验，但是在读取数据的时候会对数据进行校验，对于不合格的数据，会设置为null。</p><p>hive的优点在于加载(写)数据的时候速度较快，因为不需要对数据进行解析，而传统写时模式则有利于数据的查询。</p><p>好久没有更新博客了，这篇虽然水了点，写得像个笔记，算是开篇吧，福利就上亚丝娜吧!!!</p><p><img src="https://raw.githubusercontent.com/geroge-gao/Images/master/test1.jpg" alt="亚丝娜"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文本文件数据编码&quot;&gt;&lt;a href=&quot;#文本文件数据编码&quot; class=&quot;headerlink&quot; title=&quot;文本文件数据编码&quot;&gt;&lt;/a&gt;文本文件数据编码&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;TSV：tab separated values；即“制表符分隔值”，用制表符分隔数据&lt;/li&gt;
&lt;li&gt;CSV： comma separated values；即“逗号分隔值”，用逗号分隔数据&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;两种文件存在的缺点在于文件中可能存在不需要作为分隔符的逗号或者制表符存在，所有hive有专门的分隔符。&lt;/p&gt;&lt;p&gt;hive记录中默认的分隔符&lt;/p&gt;
    
    </summary>
    
    
      <category term="大数据" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="hive编程" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/hive%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Hive" scheme="http://yoursite.com/tags/Hive/"/>
    
      <category term="编码类型" scheme="http://yoursite.com/tags/%E7%BC%96%E7%A0%81%E7%B1%BB%E5%9E%8B/"/>
    
  </entry>
  
</feed>
